{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/ATIDA2025/community-lending-platform/components/ItemCard.tsx"],"sourcesContent":["import React from 'react';\r\nimport { Item } from '../types';\r\n\r\ninterface ItemCardProps {\r\n  item: Item;\r\n}\r\n\r\nconst ItemCard: React.FC<ItemCardProps> = ({ item }) => {\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden transform hover:-translate-y-1 transition-transform duration-300\">\r\n      <img src={item.imageUrl} alt={item.name} className=\"w-full h-48 object-cover\" />\r\n      <div className=\"p-4 flex flex-col\">\r\n        <h3 className=\"text-lg font-semibold text-gray-800\">{item.name}</h3>\r\n        <p className=\"text-sm text-gray-500 mb-4\">{item.category}</p>\r\n        <a\r\n          href={`/item/${item.id}`}\r\n          className=\"mt-auto w-full text-center bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition\"\r\n        >\r\n          פרטים והזמנה\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ItemCard;"],"names":[],"mappings":";;;;;;AAOA,MAAM,WAAoC,CAAC,EAAE,IAAI,EAAE;IACjD,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,KAAK,KAAK,QAAQ;gBAAE,KAAK,KAAK,IAAI;gBAAE,WAAU;;;;;;0BACnD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAAuC,KAAK,IAAI;;;;;;kCAC9D,8OAAC;wBAAE,WAAU;kCAA8B,KAAK,QAAQ;;;;;;kCACxD,8OAAC;wBACC,MAAM,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;wBACxB,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;uCAEe","debugId":null}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///C:/ATIDA2025/community-lending-platform/context/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useCallback, useContext } from 'react';\r\nimport { User } from '../types';\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  token: string | null;\r\n  isAuthenticated: boolean;\r\n  isLoading: boolean;\r\n  login: (user: User, token: string) => void;\r\n  logout: () => void;\r\n  authFetch: (url: string, options?: RequestInit) => Promise<Response>;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [token, setToken] = useState<string | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const storedToken = localStorage.getItem('token');\r\n      const storedUser = localStorage.getItem('user');\r\n      if (storedToken && storedUser) {\r\n        setToken(storedToken);\r\n        setUser(JSON.parse(storedUser));\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to load auth state from storage\", error);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const login = (userData: User, userToken: string) => {\r\n    localStorage.setItem('token', userToken);\r\n    localStorage.setItem('user', JSON.stringify(userData));\r\n    setToken(userToken);\r\n    setUser(userData);\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    setToken(null);\r\n    setUser(null);\r\n  };\r\n\r\n  const authFetch = useCallback(\r\n    async (url: string, options: RequestInit = {}) => {\r\n      const headers = new Headers(options.headers || {});\r\n      if (token) {\r\n        headers.set('Authorization', `Bearer ${token}`);\r\n      }\r\n      if (!headers.has('Content-Type') && !(options.body instanceof FormData)) {\r\n        headers.set('Content-Type', 'application/json');\r\n      }\r\n\r\n      return fetch(url, { ...options, headers });\r\n    },\r\n    [token]\r\n  );\r\n\r\n  const value = {\r\n    user,\r\n    token,\r\n    isAuthenticated: !!token,\r\n    isLoading,\r\n    login,\r\n    logout,\r\n    authFetch,\r\n  };\r\n\r\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n"],"names":[],"mappings":";;;;;;;AAAA;;;AAaA,MAAM,4BAAc,IAAA,sNAAa,EAA8B;AAExD,MAAM,eAAwD,CAAC,EAAE,QAAQ,EAAE;IAChF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,eAAe,YAAY;gBAC7B,SAAS;gBACT,QAAQ,KAAK,KAAK,CAAC;YACrB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0CAA0C;QAC1D,SAAU;YACR,aAAa;QACf;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,CAAC,UAAgB;QAC7B,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,SAAS;QACT,QAAQ;IACV;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,SAAS;QACT,QAAQ;IACV;IAEA,MAAM,YAAY,IAAA,oNAAW,EAC3B,OAAO,KAAa,UAAuB,CAAC,CAAC;QAC3C,MAAM,UAAU,IAAI,QAAQ,QAAQ,OAAO,IAAI,CAAC;QAChD,IAAI,OAAO;YACT,QAAQ,GAAG,CAAC,iBAAiB,CAAC,OAAO,EAAE,OAAO;QAChD;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,CAAC,CAAC,QAAQ,IAAI,YAAY,QAAQ,GAAG;YACvE,QAAQ,GAAG,CAAC,gBAAgB;QAC9B;QAEA,OAAO,MAAM,KAAK;YAAE,GAAG,OAAO;YAAE;QAAQ;IAC1C,GACA;QAAC;KAAM;IAGT,MAAM,QAAQ;QACZ;QACA;QACA,iBAAiB,CAAC,CAAC;QACnB;QACA;QACA;QACA;IACF;IAEA,qBAAO,8OAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;AAEO,MAAM,UAAU;IACrB,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///C:/ATIDA2025/community-lending-platform/app/ItemList.tsx"],"sourcesContent":["'use client';\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { Item } from '../types';\r\nimport ItemCard from '../components/ItemCard';\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ItemList: React.FC = () => {\r\n    const [items, setItems] = useState<Item[]>([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [selectedCategory, setSelectedCategory] = useState('all');\r\n    const { authFetch } = useAuth();\r\n\r\n    useEffect(() => {\r\n        const fetchItems = async () => {\r\n            setIsLoading(true);\r\n            try {\r\n                const res = await authFetch('/api/items');\r\n                if (!res.ok) {\r\n                    throw new Error('Failed to fetch items');\r\n                }\r\n                const data = await res.json();\r\n                setItems(data);\r\n            } catch (error) {\r\n                console.error(\"Error fetching items:\", error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n        fetchItems();\r\n    }, [authFetch]);\r\n\r\n    const categories = useMemo(() => {\r\n        if (!items) return ['all'];\r\n        const allCategories = items.map(item => item.category);\r\n        return ['all', ...Array.from(new Set(allCategories))];\r\n    }, [items]);\r\n\r\n    const filteredItems = useMemo(() => {\r\n        if (!items) return [];\r\n        return items.filter(item => {\r\n            const matchesCategory = selectedCategory === 'all' || item.category === selectedCategory;\r\n            const matchesSearch = item.name.toLowerCase().includes(searchTerm.toLowerCase());\r\n            return matchesCategory && matchesSearch;\r\n        });\r\n    }, [items, searchTerm, selectedCategory]);\r\n\r\n    if (isLoading) {\r\n        return <p className=\"text-center text-gray-500 col-span-full\">טוען פריטים...</p>;\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex flex-col md:flex-row gap-4 mb-8\">\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"חיפוש לפי שם פריט...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"flex-grow p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500\"\r\n                    aria-label=\"Search items\"\r\n                />\r\n                <select\r\n                    value={selectedCategory}\r\n                    onChange={(e) => setSelectedCategory(e.target.value)}\r\n                    className=\"p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500\"\r\n                    aria-label=\"Filter by category\"\r\n                >\r\n                    {categories.map(cat => (\r\n                        <option key={cat} value={cat}>{cat === 'all' ? 'כל הקטגוריות' : cat}</option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6\">\r\n                {filteredItems.length > 0 ? (\r\n                    filteredItems.map(item => (\r\n                        <ItemCard key={item.id} item={item} />\r\n                    ))\r\n                ) : (\r\n                     <p className=\"text-center text-gray-500 col-span-full\">לא נמצאו פריטים התואמים את החיפוש.</p>\r\n                )}\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ItemList;\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AAJA;;;;;AAMA,MAAM,WAAqB;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAS,EAAE;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,kIAAO;IAE7B,IAAA,kNAAS,EAAC;QACN,MAAM,aAAa;YACf,aAAa;YACb,IAAI;gBACA,MAAM,MAAM,MAAM,UAAU;gBAC5B,IAAI,CAAC,IAAI,EAAE,EAAE;oBACT,MAAM,IAAI,MAAM;gBACpB;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,SAAS;YACb,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,yBAAyB;YAC3C,SAAU;gBACN,aAAa;YACjB;QACJ;QACA;IACJ,GAAG;QAAC;KAAU;IAEd,MAAM,aAAa,IAAA,gNAAO,EAAC;QACvB,IAAI,CAAC,OAAO,OAAO;YAAC;SAAM;QAC1B,MAAM,gBAAgB,MAAM,GAAG,CAAC,CAAA,OAAQ,KAAK,QAAQ;QACrD,OAAO;YAAC;eAAU,MAAM,IAAI,CAAC,IAAI,IAAI;SAAgB;IACzD,GAAG;QAAC;KAAM;IAEV,MAAM,gBAAgB,IAAA,gNAAO,EAAC;QAC1B,IAAI,CAAC,OAAO,OAAO,EAAE;QACrB,OAAO,MAAM,MAAM,CAAC,CAAA;YAChB,MAAM,kBAAkB,qBAAqB,SAAS,KAAK,QAAQ,KAAK;YACxE,MAAM,gBAAgB,KAAK,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW;YAC7E,OAAO,mBAAmB;QAC9B;IACJ,GAAG;QAAC;QAAO;QAAY;KAAiB;IAExC,IAAI,WAAW;QACX,qBAAO,8OAAC;YAAE,WAAU;sBAA0C;;;;;;IAClE;IAEA,qBACI;;0BACI,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,WAAU;wBACV,cAAW;;;;;;kCAEf,8OAAC;wBACG,OAAO;wBACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;wBACnD,WAAU;wBACV,cAAW;kCAEV,WAAW,GAAG,CAAC,CAAA,oBACZ,8OAAC;gCAAiB,OAAO;0CAAM,QAAQ,QAAQ,iBAAiB;+BAAnD;;;;;;;;;;;;;;;;0BAIzB,8OAAC;gBAAI,WAAU;0BACV,cAAc,MAAM,GAAG,IACpB,cAAc,GAAG,CAAC,CAAA,qBACd,8OAAC,kIAAQ;wBAAe,MAAM;uBAAf,KAAK,EAAE;;;;kFAGzB,8OAAC;oBAAE,WAAU;8BAA0C;;;;;;;;;;;;;AAK5E;uCAEe","debugId":null}}]
}